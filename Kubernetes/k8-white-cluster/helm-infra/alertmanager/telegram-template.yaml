apiVersion: v1
kind: ConfigMap
metadata:
  name: telegram-template
  namespace: monitoring
data:
  telegram-template.tmpl: |
    {{ define "__yucca_text_alert_list" }}{{ range . }}
    ---
    ğŸªª <b>{{ .Labels.alertname }}</b>
    {{- if .Annotations.summary }}
    ğŸ“ {{ .Annotations.summary }}{{ end }}
    {{- if .Annotations.description }}
    ğŸ“– {{ .Annotations.description }}{{ end }}
    ğŸ· Labels:
    {{ range .Labels.SortedPairs }}  <i>{{ .Name }}</i>: <code>{{ .Value }}</code>
    {{ end }}{{ end }}
    ğŸ›  <a href="https://monitoring.testnew.egopay.ru/grafana">Grafana</a> ğŸ’Š <a href="https://monitoring.testnew.egopay.ru/alertman">Alertman</a> ğŸ’Š <a href="https://monitoring.testnew.egopay.ru/vmalert">Vmalert</a> ğŸ› 
    {{ end }}

    {{ define "telegram.yucca.message" }}
    {{ if gt (len .Alerts.Firing) 0 }}
    ğŸ”¥ Alerts Firing ğŸ”¥
    {{ template "__yucca_text_alert_list" .Alerts.Firing }}
    {{ end }}
    {{ if gt (len .Alerts.Resolved) 0 }}
    âœ… Alerts Resolved âœ…
    {{ template "__yucca_text_alert_list" .Alerts.Resolved }}
    {{ end }}
    {{ end }}